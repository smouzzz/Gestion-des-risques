<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flashcards - Gestion des Risques</title>
    <!-- Chargement de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chargement de la police Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- AJOUT DE MATHJAX (pour rendre les formules LaTeX) -->
    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        processEscapes: true
      },
      svg: {
        fontCache: 'global'
      }
    };
    </script>
    <script type="text/javascript" id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
    </script>
    <!-- FIN DE L'AJOUT -->

    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .flashcard-container {
            perspective: 1000px;
        }
        .flashcard {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
        }
        .flashcard.is-flipped {
            transform: rotateY(180deg);
        }
        .flashcard-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            /* Ajout pour g√©rer le d√©bordement */
            overflow-y: auto;
        }
        .flashcard-front {
            background-color: white;
            color: #111827;
        }
        .flashcard-back {
            background-color: #f3f4f6;
            color: #1f2937;
            transform: rotateY(180deg);
            border: 1px solid #d1d5db;
        }
        
        /* Style pour les boutons de difficult√© */
        .difficulty-btn {
            flex-grow: 1;
            padding: 0.75rem 0.5rem;
            font-size: 0.75rem; /* text-xs */
            font-weight: 500; /* medium */
            border-radius: 0.5rem; /* rounded-lg */
            transition: all 0.2s;
            border: 1px solid transparent;
        }
        .difficulty-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
    </style>
</head>
<body class="bg-gray-100 flex flex-col items-center justify-center min-h-screen p-4">

    <!-- ===== Conteneur de Connexion ===== -->
    <div id="login-container" class="w-full max-w-md mx-auto text-center p-6 bg-white rounded-lg shadow-xl">
        
        <!-- Image adapt√©e pour la Gestion des Risques -->
        <img src="https://static1.purebreak.com/articles/9/20/01/89/@/727382-thekairi78-au-coeur-d-une-nouvelle-polem-opengraph_1200-1.jpg" 
             alt="TheKairi78" 
             class="w-full h-auto max-w-xs mx-auto rounded-lg mb-6 shadow-xl object-cover" 
             onerror="this.src='https://placehold.co/320x426/333/fff?text=Image'; this.onerror=null;">
        
        <!-- Le 'whitespace-pre-line' respecte vos sauts de ligne -->
        <p class="text-gray-700 text-sm mb-4 whitespace-pre-line">
üìà Salut √† toi, jeune op√©rateur perdu !
Te voil√† face au grand portail de la volatilit√©.
        </p> <!-- Fin du paragraphe -->
        
        <!-- √âl√©ments de formulaire replac√©s √Ä L'INT√âRIEUR du conteneur -->
        <div class="mt-6">
            <input type="password" id="password-input" placeholder="Mot de passe..." class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>
        
        <button id="login-button" class="w-full bg-blue-600 text-white py-2 px-6 rounded-lg shadow-md hover:bg-blue-700 transition-colors mt-4 font-semibold">
            Entrer
        </button>

        <p id="error-message" class="text-red-500 text-sm mt-3 hidden">Mot de passe incorrect. Essaie encore, soldat.</p>

    </div> <!-- Balise de fermeture correcte pour login-container -->


    <!-- ===== Conteneur des Flashcards (cach√© par d√©faut) ===== -->
    <div id="app-container" class="w-full max-w-md mx-auto hidden">
        <!-- Titre -->
        <header class="text-center mb-6">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800">Flashcards - Gestion des Risques</h1>
            <p class="text-lg text-blue-600 font-medium mt-1">Chapitres 0, 1 & 11</p>
        </header>

        <!-- Conteneur de la carte (pour la perspective) -->
        <div class="flashcard-container w-full h-80 md:h-96">
            <!-- La carte qui va tourner -->
            <div id="flashcard" class="flashcard">
                <!-- Face Recto (Question) -->
                <div id="flashcard-front" class="flashcard-face flashcard-front">
                    <!-- Le contenu sera ins√©r√© par JavaScript -->
                </div>
                <!-- Face Verso (R√©ponse) -->
                <div id="flashcard-back" class="flashcard-face flashcard-back">
                    <!-- Le contenu sera ins√©r√© par JavaScript -->
                </div>
            </div>
        </div>
        
        <!-- Indicateur (supprim√©, car l'ordre est al√©atoire) -->
        <div class="text-center mt-4 h-5">
             <!-- Espace r√©serv√© pour la hauteur -->
        </div>

        <!-- Contr√¥les de difficult√© (cach√©s par d√©faut) -->
        <div id="difficulty-controls" class="hidden w-full mt-4">
            <p class="text-center text-sm text-gray-600 mb-3">Comment avez-vous trouv√© cette question ?</p>
            <div class="flex justify-between items-center w-full gap-2">
                <button id="btn-very-easy" data-weight="1" class="difficulty-btn bg-green-100 text-green-800 border-green-200 hover:bg-green-200">Tr√®s facile</button>
                <button id="btn-easy" data-weight="3" class="difficulty-btn bg-lime-100 text-lime-800 border-lime-200 hover:bg-lime-200">Facile</button>
                <button id="btn-medium" data-weight="5" class="difficulty-btn bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200">Moyen</button>
                <button id="btn-hard" data-weight="8" class="difficulty-btn bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200">Dur</button>
                <button id="btn-very-hard" data-weight="10" class="difficulty-btn bg-red-100 text-red-800 border-red-200 hover:bg-red-200">Tr√®s dur</button>
            </div>
        </div>
         
         <p id="helper-text" class="text-center text-gray-500 text-xs mt-6">
            Cliquez sur la carte pour voir la r√©ponse.
         </p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- R√©f√©rences DOM pour la Connexion ---
            const loginContainer = document.getElementById('login-container');
            const appContainer = document.getElementById('app-container');
            const passwordInput = document.getElementById('password-input');
            const loginButton = document.getElementById('login-button');
            const errorMessage = document.getElementById('error-message');
            
            // --- 1. Donn√©es (Extraites de vos PDF) ---
            const flashcards = [
                // --- CHAPITRE 0 : INTRODUCTION ---
                {
                    question: "Quels sont les deux grands types de risques pour une entreprise ?",
                    answer: "1. <b>Risques op√©rationnels</b>: d√©coulent directement de l'activit√©.<br>2. <b>Risques financiers</b>: li√©s √† la volatilit√© des composantes financi√®res (taux de change, taux d'int√©r√™t, cr√©dit, mati√®res premi√®res, actions...)."
                },
                {
                    question: "Pourquoi les soci√©t√©s g√®rent-elles leurs risques ?",
                    answer: "Pour limiter les difficult√©s financi√®res (surco√ªts), pr√©server la capacit√© d'investissement, diminuer la charge fiscale, et limiter les risques des partenaires (actionnaires, dirigeants...)."
                },
                {
                    question: "D√©finition: Value-at-Risk (VaR)",
                    answer: "Estimation de la <b>perte potentielle maximale</b> (en euros) d'un portefeuille, soumise √† des risques de march√©, sur une <b>dur√©e T</b> et avec un <b>seuil de probabilit√© Œ±</b>."
                },
                {
                    question: "Quels sont les avantages de la VaR ?",
                    answer: "C'est une mesure statistique simple (un chiffre en euros), elle mesure le risque total d'un portefeuille et peut √™tre compl√©t√©e par une analyse de sensibilit√©."
                },
                {
                    question: "D√©finition: Couverture (Hedging)",
                    answer: "Ensemble des strat√©gies financi√®res permettant de <b>modifier</b> et/ou de <b>r√©duire</b> l'exposition √† un risque d√©termin√©."
                },
                {
                    question: "D√©finition: Produit D√©riv√©",
                    answer: "Un instrument financier dont la <b>valeur d√©pend (d√©rive)</b> de celle d'un autre √©l√©ment appel√© le <b>sous-jacent</b>."
                },
                {
                    question: "Quelles sont les 3 cat√©gories de produits d√©riv√©s √©tudi√©es ?",
                    answer: "1. <b>Forwards / Futures</b> (op√©rations √† terme)<br>2. <b>Swaps</b> (√©change de positions/flux)<br>3. <b>Options</b> (droit d'acheter ou de vendre)"
                },
                {
                    question: "Diff√©rence principale: Forwards vs Futures",
                    answer: "<b>Forwards</b>: Gr√© √† gr√© (OTC), sur mesure, difficiles √† revendre, pas de 'marking to market'.<br><b>Futures</b>: March√© organis√©, standardis√©, 'marking to market' quotidien, chambre de compensation."
                },
                {
                    question: "Qu'est-ce qu'une Chambre de Compensation (Clearinghouse) ?",
                    answer: "Un interm√©diaire (ex: LCH-Clearnet) qui s'interpose entre acheteur et vendeur de futures/options, garantissant la bonne fin des op√©rations et g√©rant les appels de marge."
                },
                {
                    question: "Qu'est-ce qu'un 'reverse trade' ?",
                    answer: "Une op√©ration inverse (acheter si on a vendu, vendre si on a achet√©) permettant de compenser (cl√¥turer) une position sur un contrat Future avant son √©ch√©ance. (97% des cas)"
                },
                {
                    question: "D√©finition: Swap",
                    answer: "Accord entre deux parties pour <b>√©changer une s√©rie de cash flows futurs</b>. (Ex: IRS - Taux d'int√©r√™t, CRS - Devises). C'est le premier march√© hors-bourse (OTC)."
                },
                {
                    question: "D√©finition: Option CALL",
                    answer: "Donne √† son d√©tenteur le <b>DROIT</b> (et non l'obligation) d'<b>ACHETER</b> un sous-jacent √† un prix fix√© (prix d'exercice ou 'strike') jusqu'√† une date donn√©e."
                },
                {
                    question: "D√©finition: Option PUT",
                    answer: "Donne √† son d√©tenteur le <b>DROIT</b> (et non l'obligation) de <b>VENDRE</b> un sous-jacent √† un prix fix√© (prix d'exercice ou 'strike') jusqu'√† une date donn√©e."
                },
                {
                    question: "Diff√©rence: Option Europ√©enne vs Am√©ricaine",
                    answer: "<b>Europ√©enne</b>: Le droit ne peut √™tre exerc√© qu'<b>√† l'√©ch√©ance</b>.<br><b>Am√©ricaine</b>: Le droit peut √™tre exerc√© <b>√† tout moment</b> jusqu'√† l'√©ch√©ance."
                },
                {
                    question: "Qui sont les 3 types d'acteurs sur le march√© des d√©riv√©s ?",
                    answer: "1. <b>Hedgers</b> (Couverture)<br>2. <b>Arbitragistes</b> (Profit sans risque par incoh√©rence de prix)<br>3. <b>Sp√©culateurs</b> (Prise de risque pour profit)"
                },
                {
                    question: "Qu'est-ce qu'un Market Maker (MM) / Teneur de march√© ?",
                    answer: "Un acteur qui affiche en continu une <b>fourchette de prix (Achat/Vente)</b> et se porte contrepartie, assurant ainsi la <b>liquidit√©</b> du march√©."
                },
                {
                    question: "Comment une banque non-MM ach√®te-t-elle un actif au MM ?",
                    answer: "Elle ach√®te l'actif au <b>prix de vente (le plus cher)</b> affich√© par le Market Maker."
                },
                {
                    question: "Comment une banque non-MM vend-elle un actif au MM ?",
                    answer: "Elle vend l'actif au <b>prix d'achat (le moins cher)</b> affich√© par le Market Maker."
                },
                
                // --- CHAPITRE 1 : FORWARDS & CHANGE ---
                {
                    question: "D√©finition: Contrat Forward",
                    answer: "Contrat √† terme <b>non standardis√© (OTC)</b> portant sur l'achat (position longue) ou la vente (position courte) d'un actif √† un <b>prix pr√©d√©fini (K)</b> et une <b>date future (T)</b>."
                },
                {
                    question: "Quel est le payoff d'une position LONGUE sur un Forward ?",
                    answer: "Payoff = $S_T - K$<br><b>Gain</b> si $S_T > K$ (le prix du march√© est > au prix fix√©)<br><b>Perte</b> si $S_T < K$"
                },
                {
                    question: "Quel est le payoff d'une position COURTE sur un Forward ?",
                    answer: "Payoff = $K - S_T$<br><b>Gain</b> si $S_T < K$ (le prix du march√© est < au prix fix√©)<br><b>Perte</b> si $S_T > K$"
                },
                {
                    question: "Que signifie 'Absence d'Opportunit√© d'Arbitrage' (AOA) ?",
                    answer: "Principe de valorisation selon lequel le prix d'un produit d√©riv√© (ex: Forward) est fix√© de telle sorte qu'il est <b>impossible</b> de r√©aliser un profit certain sans risque."
                },
                {
                    question: "Formule: Prix d'un Forward (Pf) sur un actif sans revenu (S0) ?",
                    answer: "Bas√© sur l'AOA : $Pf = S_0 \times \exp(r \times T)$<br>(Prix spot capitalis√© au taux sans risque $r$ sur la dur√©e $T$)"
                },
                {
                    question: "Formule: Prix d'un Forward (Pf) sur un actif avec frais de stockage (Cs) ?",
                    answer: "$Pf = (S_0 + C_s) \times \exp(r \times T)$<br>(On ajoute la valeur actualis√©e des co√ªts de stockage au prix spot)"
                },
                {
                    question: "Formule: Prix d'un Forward (Pf) sur un actif avec revenu (dividende D) ?",
                    answer: "$Pf = (S_0 - VA(D)) \times \exp(r \times T)$<br>(On soustrait la valeur actualis√©e $VA(D)$ du dividende au prix spot)"
                },
                {
                    question: "Qu'est-ce qu'un 'Forward Forward' (Terme contre Terme) ?",
                    answer: "Une offre de <b>financement garanti</b> (montant et taux) √† une date future. Il couvre √† la fois le <b>risque de taux ET de liquidit√©</b>."
                },
                {
                    question: "Quelles sont les 3 op√©rations de la banque pour un 'Forward Forward' (pr√™t en 3 mois pour 6 mois) ?",
                    answer: "1. <b>Emprunt</b> sur la dur√©e totale (9 mois).<br>2. <b>Placement</b> (pr√™t n¬∞1) pendant la p√©riode d'attente (3 mois).<br>3. <b>Pr√™t n¬∞2</b> au client (6 mois) avec les fonds du pr√™t n¬∞1."
                },
                {
                    question: "Quel est l'inconv√©nient du 'Forward Forward' ?",
                    answer: "Il est <b>co√ªteux</b> car il couvre deux risques (taux + liquidit√©) et implique des montages complexes (co√ªt bilanciel √©lev√© pour la banque)."
                },
                {
                    question: "D√©finition: Forward Rate Agreement (FRA)",
                    answer: "Un engagement sur un <b>taux garanti</b> pour un emprunt ou placement futur (entre T1 et T2). Il ne couvre <b>que le risque de taux</b> (pas de liquidit√©)."
                },
                {
                    question: "Qu'est-ce qu'un 'Call FRA' ?",
                    answer: "Une 'option' (garantie) de <b>taux emprunteur</b>. L'acheteur se garantit contre une <b>hausse</b> des taux."
                },
                {
                    question: "Qu'est-ce qu'un 'Put FRA' ?",
                    answer: "Une 'option' (garantie) de <b>taux pr√™teur</b>. L'acheteur se garantit contre une <b>baisse</b> des taux."
                },
                {
                    question: "Comment est r√©gl√© un FRA ?",
                    answer: "Par le paiement d'un <b>diff√©rentiel d'int√©r√™t</b> (valeur actualis√©e) entre le taux garanti (Tg) et le taux de r√©f√©rence du march√© (Tr), appliqu√© √† un notionnel C. Il n'y a <b>pas d'√©change de capital</b>."
                },
                {
                    question: "Formule (simplifi√©e) du r√®glement d'un FRA ?",
                    answer: "$V = \frac{C \times (T_r - T_g) \times \text{Nbre jours}/360}{1 + T_r \times \text{Nbre jours}/360}$<br>(Si Tr > Tg, le vendeur paie l'acheteur)"
                },
                {
                    question: "Qu'est-ce qu'un 'change √† terme sec' ?",
                    answer: "Une op√©ration d'achat ou de vente √† terme d'une devise contre une autre, pour couvrir un <b>risque de change certain</b> (ex: facture future)."
                },
                {
                    question: "Un exportateur europ√©en attend un paiement en USD dans 6 mois. Quel est son risque ?",
                    answer: "Une <b>baisse</b> du cours USD/EUR (une d√©pr√©ciation du dollar), ce qui r√©duirait son revenu en EUR."
                },
                {
                    question: "Un importateur europ√©en doit payer en USD dans 3 mois. Quel est son risque ?",
                    answer: "Une <b>hausse</b> du cours USD/EUR (une appr√©ciation du dollar), ce qui augmenterait son co√ªt en EUR."
                },
                {
                    question: "Comment un exportateur (attendant des USD) se couvre-t-il ?",
                    answer: "Il <b>VEND √† terme</b> les USD aujourd'hui pour fixer son cours de change futur."
                },
                {
                    question: "Comment un importateur (devant payer des USD) se couvre-t-il ?",
                    answer: "Il <b>ACH√àTE √† terme</b> les USD aujourd'hui pour fixer son cours de change futur."
                },
                {
                    question: "Quelles sont les 3 op√©rations (th√©oriques) de la banque pour un 'change √† terme' (ex: achat √† terme d'USD) ?",
                    answer: "1. <b>Emprunt</b> de la devise vendue √† terme (ici, EUR).<br>2. <b>Op√©ration de change</b> au comptant (EUR -> USD).<br>3. <b>Pr√™t (placement)</b> de la devise achet√©e √† terme (ici, USD)."
                },
                {
                    question: "Formule: Taux de Change √† Terme (CT) (AOA)",
                    answer: "$CT_{A/B} = CC_{A/B} \times \frac{1 + Tx_B \times (N/Base)}{1 + Tx_A \times (N/Base)}$<br>(CC = Cours Comptant, Tx = Taux d'int√©r√™t)"
                },
                {
                    question: "D√©finition: Report (March√© des changes)",
                    answer: "Une devise est en <b>Report</b> si son cours √† terme (CT) est <b>PLUS CHER</b> que son cours au comptant (CC).<br>(CT > CC)"
                },
                {
                    question: "D√©finition: D√©port (March√© des changes)",
                    answer: "Une devise est en <b>D√©port</b> si son cours √† terme (CT) est <b>MOINS CHER</b> que son cours au comptant (CC).<br>(CT < CC)"
                },
                {
                    question: "Quand une devise est-elle en REPORT ?",
                    answer: "Quand son taux d'int√©r√™t est <b>INF√âRIEUR</b> √† celui de l'autre devise.<br>(Ex: Si $Tx_{USD} < Tx_{EUR}$, alors l'USD est en Report vs EUR)"
                },
                {
                    question: "Quand une devise est-elle en D√âPORT ?",
                    answer: "Quand son taux d'int√©r√™t est <b>SUP√âRIEUR</b> √† celui de l'autre devise.<br>(Ex: Si $Tx_{USD} > Tx_{EUR}$, alors l'USD est en D√©port vs EUR)"
                },
                {
                    question: "Qui b√©n√©ficie du REPORT d'une devise (ex: USD en report) ?",
                    answer: "L'<b>EXPORTATEUR</b> (qui vend des USD √† terme). Il vendra ses USD plus cher √† terme qu'au comptant."
                },
                {
                    question: "Qui b√©n√©ficie du D√âPORT d'une devise (ex: USD en d√©port) ?",
                    answer: "L'<b>IMPORTATEUR</b> (qui ach√®te des USD √† terme). Il ach√®tera ses USD moins cher √† terme qu'au comptant."
                },
                {
                    question: "Que sont les 'Points de Swap' (ou points de terme) ?",
                    answer: "C'est la diff√©rence entre le cours √† terme et le cours au comptant (CT - CC). C'est le Report (si > 0) ou le D√©port (si < 0)."
                },
                {
                    question: "Qu'est-ce qu'un 'pip' (Percentage In Points) ?",
                    answer: "La plus petite unit√© de mesure pour un mouvement de march√© sur le Forex (souvent la 4√®me d√©cimale). Ex: 1,234<b>5</b>"
                },
                {
                    question: "Formule: C√¥t√© 'BID' (Achat) d'une fourchette de change √† terme $CT_{A/B}$",
                    answer: "$CT_{A/B}^{Bid} = CC_{A/B}^{Bid} \times \frac{1 + Tx_B^{Bid} \times (N/Base)}{1 + Tx_A^{Ask} \times (N/Base)}$<br>(On utilise les pires taux pour la banque: Pr√™t au + bas, Emprunt au + haut)"
                },
                {
                    question: "Formule: C√¥t√© 'ASK' (Vente) d'une fourchette de change √† terme $CT_{A/B}$",
                    answer: "$CT_{A/B}^{Ask} = CC_{A/B}^{Ask} \times \frac{1 + Tx_B^{Ask} \times (N/Base)}{1 + Tx_A^{Bid} \times (N/Base)}$<br>(On utilise les pires taux pour la banque: Pr√™t au + bas, Emprunt au + haut)"
                },
                {
                    question: "Comment calcule-t-on un cours crois√© √† terme (ex: $CT_{A/C}$) ?",
                    answer: "$CT_{A/C} = CT_{A/B} \times CT_{B/C}$<br>(On multiplie les cours √† terme, pas les cours au comptant)"
                },
                {
                    question: "D√©finition: Swap Cambiste",
                    answer: "Une op√©ration simultan√©e d'<b>emprunt et de pr√™t</b> de devises. Combine une op√©ration <b>SPOT</b> et une op√©ration de <b>TERME inverse</b>."
                },
                {
                    question: "Quelle est l'utilit√© d'un Swap Cambiste ?",
                    answer: "C'est un pr√™t garanti par le d√©p√¥t d'une autre monnaie. Permet de g√©rer la tr√©sorerie √† court terme dans diff√©rentes devises."
                },

                // --- CHAPITRE 11 : MARCH√â DES CHANGES ---
                {
                    question: "D√©finition: March√© des changes (FOREX)",
                    answer: "March√© <b>interbancaire</b> (OTC) o√π les op√©rateurs (cambistes) assurent la cotation et les √©changes de devises. C'est un march√© √©lectronique, d√©centralis√© et continu (24h/24)."
                },
                {
                    question: "Quel est le d√©lai de r√®glement standard sur le march√© spot (au comptant) ?",
                    answer: "<b>48 heures (J+2)</b> apr√®s la date de l'op√©ration."
                },
                {
                    question: "Qu'est-ce qu'une 'position de change' ?",
                    answer: "Le solde des avoirs et engagements dans une devise √©trang√®re.<br><b>Position longue</b>: Solde positif (on d√©tient la devise).<br><b>Position courte</b>: Solde n√©gatif (on doit la devise)."
                },
                {
                    question: "Quelle est la part des op√©rations 'r√©elles' (commerce) sur le FOREX ?",
                    answer: "Seulement <b>3%</b>. Les 97% restants sont des transactions financi√®res (couverture, sp√©culation, arbitrage) entre les banques."
                },
                {
                    question: "Qu'est-ce que le 'Spread' (ou fourchette) ?",
                    answer: "La diff√©rence entre le prix de vente (Ask/Vendeur) et le prix d'achat (Bid/Acheteur) d'une devise. C'est la r√©mun√©ration du Market Maker."
                },
                {
                    question: "Dans la cotation EUR/USD = 1.05, quelle est la 'Base Currency' (devise de base) ?",
                    answer: "L'<b>EUR</b> (la premi√®re devise). Elle vaut 1 unit√© (1 EUR = 1.05 USD)."
                },
                {
                    question: "Dans la cotation EUR/USD = 1.05, quelle est la 'Quote Currency' (devise de contrepartie) ?",
                    answer: "L'<b>USD</b> (la seconde devise). C'est la devise dans laquelle le prix est exprim√©."
                },
                {
                    question: "Si EUR/USD passe de 1.05 √† 1.10, l'Euro s'est-il appr√©ci√© ou d√©pr√©ci√© ?",
                    answer: "L'Euro s'est <b>appr√©ci√©</b>. Il faut plus de USD (1.10 au lieu de 1.05) pour acheter 1 EUR."
                },
                {
                    question: "Si USD/EUR passe de 0.95 √† 0.90, l'Euro s'est-il appr√©ci√© ou d√©pr√©ci√© ?",
                    answer: "L'Euro s'est <b>appr√©ci√©</b>. Il faut moins d'EUR (0.90 au lieu de 0.95) pour acheter 1 USD."
                },
                {
                    question: "Qu'est-ce que la cotation 'au certain' (pour un europ√©en) ?",
                    answer: "Le prix de la devise <b>√©trang√®re</b> en monnaie <b>nationale</b>.<br>Ex: <b>USD/EUR = 0.95</b> (1 USD vaut 0.95 EUR)."
                },
                {
                    question: "Qu'est-ce que la cotation '√† l'incertain' (pour un europ√©en) ?",
                    answer: "Le prix de la monnaie <b>nationale</b> en devise <b>√©trang√®re</b>.<br>Ex: <b>EUR/USD = 1.05</b> (1 EUR vaut 1.05 USD)."
                },
                {
                    question: "Quelle est la relation entre le cours au comptant (Cc) et le cours √† terme (Ct) selon la th√©orie keyn√©sienne (AOA) ?",
                    answer: "Le cours √† terme est le cours au comptant ajust√© par le diff√©rentiel de taux d'int√©r√™t.<br>$Ct = Cc \times \frac{(1 + tx_{USD} \times N_j/Base)}{(1 + tx_{EUR} \times N_j/Base)}$ (pour une cotation USD/EUR)"
                },

                // --- EXERCICES CHAPITRE 1 ---
                {
                    question: "(Exercice) Une entreprise veut emprunter 450 000 ‚Ç¨ dans 3 mois pour 9 mois. Quel instrument couvre le risque de taux ET de liquidit√© ?",
                    answer: "Le <b>Forward-Forward</b> (ou Terme contre Terme)."
                },
                {
                    question: "(Exercice) Une banque vend un FRA 3 contre 3. Qu'anticipe-t-elle ?",
                    answer: "Elle anticipe une <b>baisse des taux</b>. (Elle vend une garantie de taux √† 5% et esp√®re que le march√© sera √† 4%, empochant la diff√©rence)."
                },
                {
                    question: "(Exercice) Un exportateur va recevoir 1M USD dans 6 mois. Doit-il acheter ou vendre √† terme ?",
                    answer: "Il doit <b>VENDRE</b> 1M USD √† terme pour figer son revenu en EUR."
                },
                {
                    question: "(Exercice) Un importateur doit payer 1.45M USD dans 6 mois. Doit-il acheter ou vendre √† terme ?",
                    answer: "Il doit <b>ACHETER</b> 1.45M USD √† terme pour figer son co√ªt en EUR."
                },
                {
                    question: "(Exercice) Taux EUR = 3.2%. Taux USD = 1.7%. L'USD est-il en Report ou en D√©port par rapport √† l'EUR ?",
                    answer: "L'USD est en <b>REPORT</b>.<br>Son taux (1.7%) est <b>inf√©rieur</b> √† celui de l'EUR (3.2%). Son cours √† terme sera donc plus cher."
                },
                {
                    question: "(Exercice) Taux EUR = 0.18%. Taux USD = 0.36%. L'USD est-il en Report ou en D√©port par rapport √† l'EUR ?",
                    answer: "L'USD est en <b>D√âPORT</b>.<br>Son taux (0.36%) est <b>sup√©rieur</b> √† celui de l'EUR (0.18%). Son cours √† terme sera donc moins cher."
                },
                {
                    question: "(Exercice) Un exportateur (recevant des USD) a-t-il raison de se couvrir si l'USD est en REPORT ?",
                    answer: "<b>Oui</b>, c'est doublement avantageux. Il √©limine son risque de baisse ET il vend ses USD √† un cours (terme) plus √©lev√© que le cours (comptant)."
                },
                {
                    question: "(Exercice) Un exportateur (recevant des USD) a-t-il raison de se couvrir si l'USD est en D√âPORT ?",
                    answer: "<b>C'est un arbitrage</b>: il √©limine son risque de baisse, mais il accepte de vendre ses USD √† un cours (terme) moins √©lev√© que le cours (comptant). C'est le <b>co√ªt de la couverture</b>."
                },
                {
                    question: "(Exercice) Taux EUR (Ask) = 4.70%. Taux USD (Bid) = 5.25%. Cours EUR/USD (Bid) = 1.3500. Calculez $CT^{Bid}$ (achat EUR/vente USD) √† 92 jours (Base 360).",
                    answer: "$CT^{Bid} = 1.3500 \times \frac{1 + 5.25\% \times (92/360)}{1 + 4.70\% \times (92/360)} = 1.3519$<br>(Devise A=EUR, Devise B=USD)"
                }
            ];

            // --- 2. √âtat de l'application ---
            let deck = [];
            let currentCardIndex = 0;
            let isFlipped = false;

            // --- 3. R√©f√©rences DOM pour l'App ---
            const flashcard = document.getElementById('flashcard');
            const flashcardFront = document.getElementById('flashcard-front');
            const flashcardBack = document.getElementById('flashcard-back');
            const difficultyControls = document.getElementById('difficulty-controls');
            const difficultyButtons = document.querySelectorAll('.difficulty-btn');
            const helperText = document.getElementById('helper-text');

            // --- 4. Fonctions de l'App ---

            /**
             * Initialise le "deck" de cartes avec un poids par d√©faut.
             */
            function initializeApp() {
                // Cr√©e le deck de r√©vision. Chaque carte a un poids initial de 5 (Moyen).
                deck = flashcards.map((card, index) => ({
                    ...card,
                    originalIndex: index,
                    weight: 5 // Poids initial, 5 = Moyen
                }));
                showNextCard();
            }
            
            /**
             * S√©lectionne la prochaine carte en utilisant un tirage pond√©r√©.
             */
            function showNextCard() {
                // 1. Calculer le poids total du deck
                let totalWeight = deck.reduce((acc, card) => acc + card.weight, 0);
                
                // 2. G√©n√©rer un nombre al√©atoire entre 0 et le poids total
                let randomWeight = Math.random() * totalWeight;
                
                // 3. Trouver la carte correspondant √† ce poids
                let selectedIndex = -1;
                for (let i = 0; i < deck.length; i++) {
                    randomWeight -= deck[i].weight;
                    if (randomWeight <= 0) {
                        selectedIndex = i;
                        break;
                    }
                }
                
                if (selectedIndex === -1) {
                    // S√©curit√© au cas o√π (ne devrait pas arriver)
                    selectedIndex = Math.floor(Math.random() * deck.length);
                }
                
                currentCardIndex = selectedIndex;
                updateFlashcard(currentCardIndex);
            }

            /**
             * Met √† jour le contenu de la carte et r√©initialise son √©tat.
             */
            function updateFlashcard(index) {
                const card = deck[index];
                flashcardFront.innerHTML = `<span class="text-xl md:text-2xl font-semibold">${card.question}</span>`;
                flashcardBack.innerHTML = `<span class="text-base md:text-lg">${card.answer}</span>`;
                
                // --- AJOUT ---
                // Demander √† MathJax de re-composer les maths sur les deux faces
                if (window.MathJax) {
                    MathJax.typesetPromise([flashcardFront, flashcardBack]).catch((err) => console.log('Erreur MathJax: ', err));
                }
                // --- FIN AJOUT ---

                // R√©initialiser la carte (la mettre c√¥t√© question)
                if (isFlipped) {
                    flipCard(); // Retourne la carte si elle √©tait sur la r√©ponse
                } else {
                    // S'assurer que les contr√¥les sont cach√©s si la carte n'√©tait pas retourn√©e
                    difficultyControls.classList.add('hidden');
                    helperText.classList.remove('hidden');
                }
            }

            /**
             * G√®re le clic sur un bouton de difficult√©.
             */
            function handleDifficultyClick(event) {
                // 1. R√©cup√©rer le nouveau poids depuis l'attribut data-weight
                const newWeight = parseInt(event.currentTarget.dataset.weight, 10);
                
                // 2. Mettre √† jour le poids de la carte actuelle dans le deck
                deck[currentCardIndex].weight = newWeight;
                
                // 3. Afficher la prochaine carte (s√©lection pond√©r√©e)
                showNextCard();
            }

            /**
             * Retourne la carte (animation) et affiche/cache les contr√¥les.
             */
            function flipCard() {
                isFlipped = !isFlipped;
                flashcard.classList.toggle('is-flipped');
                
                if (isFlipped) {
                    // La carte est sur la face "R√©ponse"
                    difficultyControls.classList.remove('hidden');
                    helperText.classList.add('hidden');
                } else {
                    // La carte est sur la face "Question"
                    difficultyControls.classList.add('hidden');
                    helperText.classList.remove('hidden');
                }
            }

            // --- 5. √âcouteurs d'√©v√©nements ---

            // √âcouteur pour le bouton de connexion
            loginButton.addEventListener('click', () => {
                if (passwordInput.value === 'stage') {
                    // Mot de passe correct
                    loginContainer.classList.add('hidden');
                    appContainer.classList.remove('hidden');
                    errorMessage.classList.add('hidden');
                    
                    // --- 6. Initialisation de l'app ---
                    initializeApp(); // D√©marrer l'application SEULEMENT MAINTENANT

                } else {
                    // Mot de passe incorrect
                    errorMessage.classList.remove('hidden');
                    passwordInput.value = ''; // Vider le champ
                    passwordInput.focus(); // Remettre le focus
                }
            });

            // Permettre de valider avec "Entr√©e"
            passwordInput.addEventListener('keyup', (event) => {
                if (event.key === 'Enter') {
                    event.preventDefault(); // Emp√™che le comportement par d√©faut (si c'est dans un formulaire)
                    loginButton.click(); // Simuler un clic sur le bouton
                }
            });

            // Cliquer sur la carte pour la retourner
            flashcard.addEventListener('click', flipCard);

            // Ajouter un √©couteur pour chaque bouton de difficult√©
            difficultyButtons.forEach(button => {
                button.addEventListener('click', handleDifficultyClick);
            });

            // --- 6. Initialisation ---
            // initializeApp(); // On ne d√©marre PAS l'application tout de suite.
            passwordInput.focus(); // Mettre le focus sur le champ mot de passe au chargement

        });
    </script>
</body>
</html>
